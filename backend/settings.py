import os
import hmac
import hashlib
from datetime import datetime

# bot_app
BOT_TOKEN = os.environ["BOT_TOKEN"]
BOT_FEEDBACK_TOKEN = os.environ["BOT_FEEDBACK_TOKEN"]

# bot_controller
WEB_APP_URL = os.environ["WEB_APP_URL"]
ADMIN_ID = 267429209
BUTTON_TEXT = {
    "ru": "–û—Ç–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
    "en": "Open Mini App"
}
WELCOME_MESSAGE = {
    "ru": "üé¨ *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MovieAI!*\n\n"
          "–ü–æ–¥–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å–º –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é –∏–ª–∏ –∂–∞–Ω—Ä—É ‚Äî —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.\n\n"
          "–û—Ç–ø—Ä–∞–≤—å—Ç–µ /help, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –æ–±–æ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö.\n\n"
          "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.\n\n",
    "en" : "üé¨ *Welcome to MovieAI!*\n\n"
           "Find a movie by description, mood, or genre ‚Äî using the app.\n\n"
           "Send /help to learn all the features.\n\n"
           "Tap the button below to get started.\n\n"
}
HELP_MESSAGE = {
    "ru": "‚ùì *–ß—Ç–æ —É–º–µ–µ—Ç MovieAI*\n\n"
          "–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤:\n"
          "‚Ä¢  –ü–æ –∂–∞–Ω—Ä—É, –∞—Ç–º–æ—Å—Ñ–µ—Ä–µ, –≥–æ–¥—É –∏ –¥—Ä—É–≥–∏–º —Ñ–∏–ª—å—Ç—Ä–∞–º\n"
          "‚Ä¢  –ü–æ –≤–∞—à–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é ‚Äî –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —á–∞—Ç–µ\n"
          "‚Ä¢  –ü–æ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–µ–º—É—Å—è —Ñ–∏–ª—å–º—É ‚Äî –Ω–∞–π–¥—ë—Ç –ø–æ—Ö–æ–∂–∏–µ\n\n"
          "‚ù§Ô∏è –í –ø–æ–¥–±–æ—Ä–µ ‚Äî –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ–∏–ª—å–º—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –ª—É—á—à–∏–µ –Ω–∞—Ö–æ–¥–∫–∏.\n\n"
          "–£ –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ—è, –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ? \n–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –±–æ—Ç—É ‚Äî –æ–Ω –≤—Å—ë —á–∏—Ç–∞–µ—Ç!\n\n"
          "–ù–∞–∂–º–∏—Ç–µ /start, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n\n",
    "en" : "‚ùì *What MovieAI can do*\n\n"
            "You can search for movies in a way that suits you:\n"
            "‚Ä¢ By genre, atmosphere, year, and other filters\n"
            "‚Ä¢ By your description ‚Äî in an interactive chat\n"
            "‚Ä¢ By similar movies ‚Äî find more like the ones you like\n\n"
            "‚ù§Ô∏è In matching ‚Äî add movies to your favorites so you don‚Äôt lose great finds.\n\n"
            "Have an idea, question, or suggestion?\nJust send a message ‚Äî we read everything!\n\n"
            "Tap /start to open the mini-app\n\n"
}
FEEDBACK_MASSAGE = {
    "ru": "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å! –ú—ã –≤—Å—ë —É—á—Ç—ë–º üôå",
    "en": "Thanks for the feedback! We'll take it into account üôå"
}
PAYMENT_MESSAGE = {
    "ru": lambda amount: f"üéâ –ü–ª–∞—Ç—ë–∂ –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ! –¢–µ–±–µ –Ω–∞—á–∏—Å–ª–µ–Ω–æ {amount} –∑–≤–µ–∑–¥ ‚≠êÔ∏è",
    "en": lambda amount: f"üéâ Payment successful! You've received {amount} stars ‚≠êÔ∏è"
}

# middlewares.auth_middleware
API_KEY = os.environ["API_KEY"]
API_KEY_NAME = "X-API-Key"
INIT_DATA_HEADER_NAME = "X-Telegram-Init-Data"
TELEGRAM_INIT_DATA_SECRET = hmac.new(b"WebAppData", BOT_TOKEN.encode(), hashlib.sha256).digest()
EXCLUDED_AUTH_PATHS = {
    "/health",
    "/preview",
    "/docs",
    "/docs/oauth2-redirect",
    "/openapi.json",
    "/redoc",
    "/add-favorites",
    "/delete-favorites",
    "/watch-favorites",
    "/add-skipped",
    "/get-popular-movies",
    "/feedback"
}

# middlewares.db_session_middleware
EXCLUDED_DBSESSION_PATHS = {
    "/health",
    "/log-event",
    "/docs",
    "/docs/oauth2-redirect",
    "/openapi.json",
    "/redoc"
}

# middlewares.logging_middleware
EXCLUDED_LOG_PATHS = ["/health",]

# main
ALLOW_ORIGINS = [
    "https://autogenz.com",
    "https://storage.googleapis.com",
    "http://localhost:5173",
    "https://movieaiapp.com"
]

# clients.bq_client
TABLE_ID = "autogen-1-438415.movieAI_logs.page_views"

# clients.client_factory
KP_API_KEY = os.environ["KINOPOISK_API_KEY"]

# prompt_templates.py
PROMPT_NUM_MOVIES = 20

# clients.openai_client
MODEL_QA = "gpt-5.1"
TEMPERATURE_QA = 0.9
MODEL_MOVIES = "gpt-4o-mini"
TEMPERATURE_MOVIES = 0.9
QUESTION_PREFIX_PATTERN = r'\{\s*"questions"\s*:\s*\['
MOVIES_PREFIX_PATTERN = r'\{\s*"movies"\s*:\s*\['
OVERRIDE_DATA = {
    "The Witch": "The VVitch: A New-England Folktale",
    "Train to Busan": "Busanhaeng",
    "Train to Busan 2": "Bando",
    "The Platform": "El Hoyo",
    "The Platform 2": "El Hoyo 2",
    "The Red Turtle": "La tortue rouge",
    "Nymphomaniac": "Nymphomaniac: Vol. I"
}

# clients.gc_client
BUCKET_NAME = "autogen-images"

# db_managers.base
SQL_HOST=os.environ["SQL_HOST"]
SQL_PORT=os.environ["SQL_PORT"]
SQL_DB=os.environ["SQL_DB"]
SQL_USER=os.environ["SQL_USER"]
SQL_PSWRD = os.environ["SQL_PSWRD"]
ASYNC_DATABASE_URL = f"postgresql+asyncpg://{SQL_USER}:{SQL_PSWRD}@{SQL_HOST}:{SQL_PORT}/{SQL_USER}"

# clients.rag_pipeline
INDEX_PATH = os.environ["INDEX_PATH"]
TOP_K_FETCH = 5000
TOP_K_HYBRID = 1000
TOP_K_SIMILAR = 1000
TOP_K_SEARCH = 30
MODEL_EMBS = "text-embedding-3-large"
CLASS_NAME = "Movie"  # –ö–æ–ª–ª–µ–∫—Ü–∏—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
WEAVIATE_HOST_HTTP = "weaviate"
WEAVIATE_PORT_HTTP = 8080
WEAVIATE_HOST_GRPC = "weaviate"
WEAVIATE_PORT_GRPC = 50051

# –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
DEFAULT_LOCALE = "ru"  # ru –∏–ª–∏ en
SUPPORTED_LOCALES = ["ru", "en"]

ATMOSPHERE_MAPPING = {
    "–ø—Ä–æ –ª—é–±–æ–≤—å" : "–ò—Å—Ç–æ—Ä–∏—è –æ —Å–∏–ª—å–Ω—ã—Ö —á—É–≤—Å—Ç–≤–∞—Ö, —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–ª–∏–∑–æ—Å—Ç–∏ –º–µ–∂–¥—É –≥–µ—Ä–æ—è–º–∏. "
                   "–§–∏–ª—å–º —Å —Ç—ë–ø–ª–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π, —Ç—Ä–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏, –¥—Ä–∞–º–æ–π –∏–ª–∏ –ª—ë–≥–∫–æ–π –∫–æ–º–µ–¥–∏–µ–π, "
                   "–≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ—Ç–æ—Ä–æ–π ‚Äî –ª—é–±–æ–≤—å, —Å—Ç—Ä–∞—Å—Ç—å –∏–ª–∏ —Å—É–¥—å–±–æ–Ω–æ—Å–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞.",
    "–¥—É—à–µ–≤–Ω—ã–π –∏ —Ç—Ä–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π" : "–î–æ–±—Ä—ã–µ, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å–º—ã, –≤—ã–∑—ã–≤–∞—é—â–∏–µ —Å–æ—á—É–≤—Å—Ç–≤–∏–µ –∏ –∑–∞—Å—Ç–∞–≤–ª—è—é—â–∏–µ –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å –∑–∞ –≥–µ—Ä–æ–µ–≤. "
                                "–°—é–∂–µ—Ç –æ–±—ã—á–Ω–æ —Å–≤—è–∑–∞–Ω —Å –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ–º —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π, —Å–∏–ª–æ–π —Å–µ–º—å–∏, –¥—Ä—É–∂–±—ã –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ä–æ—Å—Ç–∞. "
                                "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –º—è–≥–∫–∞—è, —Ç–µ–ø–ª–∞—è, –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–ø–µ—à–Ω–æ–µ –∏ —á–µ–ª–æ–≤–µ—á–Ω–æ–µ.",
    "–¥–∏–Ω–∞–º–∏—á–Ω—ã–π –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–π" : "–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ, –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å –±—ã—Å—Ç—Ä—ã–º —Ä–∞–∑–≤–∏—Ç–∏–µ–º —Å–æ–±—ã—Ç–∏–π, —ç–∫—à–µ–Ω–æ–º, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏ "
                                 "–∏ —Å–∏–ª—å–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º. –ß–∞—Å—Ç–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–≥–æ–Ω–∏, –æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Å–ª–æ–∂–Ω—ã–µ –º–æ—Ä–∞–ª—å–Ω—ã–µ –≤—ã–±–æ—Ä—ã. "
                                 "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Ç—Ä–µ–≤–æ–∂–Ω–∞—è –∏ –±—É–¥–æ—Ä–∞–∂–∞—â–∞—è.",
    "–∂–∏–∑–Ω–µ—É—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π" : "–§–∏–ª—å–º, –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π –Ω–∞ –Ω–∞–¥–µ–∂–¥—É, –≤–µ—Ä—É –≤ –¥–æ–±—Ä–æ, –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π. "
                          "–ì–µ—Ä–æ–∏ –º–µ–Ω—è—é—Ç—Å—è –∫ –ª—É—á—à–µ–º—É, –Ω–∞—Ö–æ–¥—è—Ç —Å–∏–ª—ã –∂–∏—Ç—å, –ª—é–±–∏—Ç—å –∏ –ø—Ä–æ—â–∞—Ç—å. "
                          "–ò—Å—Ç–æ—Ä–∏—è —á–∞—Å—Ç–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö –∏–ª–∏ –≤–∞–∂–Ω–æ–º –ª–∏—á–Ω–æ—Å—Ç–Ω–æ–º –æ–ø—ã—Ç–µ. "
                          "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Å–≤–µ—Ç–ª–∞—è, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∞—è, uplifting.",
    "–º—Ä–∞—á–Ω—ã–π –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–π" : "–°—é–∂–µ—Ç —Å –≥–Ω–µ—Ç—É—â–µ–π, —Ç—ë–º–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π, —á–∞—Å—Ç–æ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –¥—Ä–∞–º—ã, –Ω—É–∞—Ä–∞, —Ç—Ä–∏–ª–ª–µ—Ä–∞ –∏–ª–∏ —Ö–æ—Ä—Ä–æ—Ä–∞. "
                              "–í–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –Ω–∞—Å—ã—â–µ–Ω —Ç–µ–Ω—è–º–∏, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞–º–∏, –º–µ–¥–ª–µ–Ω–Ω—ã–º —Ç–µ–º–ø–æ–º. "
                              "–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö, –∑–∞–≥–∞–¥–æ—á–Ω—ã—Ö –∏–ª–∏ –æ–ø–∞—Å–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö.",
    "—Å—é—Ä—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π" : "–ù–µ–æ–±—ã—á–Ω—ã–π, –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Ñ–∏–ª—å–º, –≥–¥–µ –Ω–∞—Ä—É—à–∞—é—Ç—Å—è –∑–∞–∫–æ–Ω—ã –ª–æ–≥–∏–∫–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏. "
                        "–ò—Å—Ç–æ—Ä–∏–∏ –º–æ–≥—É—Ç –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å —Å–Ω—ã, –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –∏–ª–∏ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –ø—Ä–∏—Ç—á–∏. "
                        "–ú–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∏–∑–º–∞, –Ω–µ–æ–±—ã—á–Ω–æ–≥–æ –≤–∏–∑—É–∞–ª–∞, –∞–±—Å—É—Ä–¥–Ω—ã—Ö —Å—Ü–µ–Ω –∏ –¥–≤–æ–π–Ω—ã—Ö —Å–º—ã—Å–ª–æ–≤.",
    "–ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π" : "–ì–ª—É–±–æ–∫–∏–π —Ñ–∏–ª—å–º, –∏—Å—Å–ª–µ–¥—É—é—â–∏–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–∏—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –∏—Ö —Å—Ç—Ä–∞—Ö–∏, –º–æ—Ç–∏–≤–∞—Ü–∏–∏, —Ç—Ä–∞–≤–º—ã. "
                        "–ß–∞—Å—Ç–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∏–Ω—Ç—Ä–∏–≥–µ, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç—è—Ö –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏. "
                        "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –ø–ª–æ—Ç–Ω–∞—è, —á–∞—Å—Ç–æ —Ç—Ä–µ–≤–æ–∂–Ω–∞—è –∏–ª–∏ –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω–∞—è. "
                        "–ú–æ–≥—É—Ç –±—ã—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Ç—Ä–∏–ª–ª–µ—Ä–∞, –¥—Ä–∞–º—ã –∏–ª–∏ –¥–µ—Ç–µ–∫—Ç–∏–≤–∞.",
    "–º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π" : "–°–ø–æ–∫–æ–π–Ω—ã–π, –Ω–µ—Å–ø–µ—à–Ω—ã–π —Ñ–∏–ª—å–º, —Å–æ–∑–¥–∞—é—â–∏–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —Å–æ–∑–µ—Ä—Ü–∞–Ω–∏—è. "
                     "–ú–∞–ª–æ –¥–∏–∞–ª–æ–≥–æ–≤, –≤–∏–∑—É–∞–ª—å–Ω–æ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω—ã, –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –∑–≤—É–∫–µ, –ø—Ä–∏—Ä–æ–¥–µ, –≤—Ä–µ–º–µ–Ω–∏. "
                     "–ò—Å—Ç–æ—Ä–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –∏–ª–∏ –≤–æ–≤—Å–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å. "
                     "–í–¥–æ—Ö–Ω–æ–≤–ª—è—é—Ç –Ω–∞ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è, –æ—â—É—â–µ–Ω–∏–µ –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å.",
    "–¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã–π" : "–ú—Ä–∞—á–Ω–∞—è –∏ —Ç—è–∂—ë–ª–∞—è –∏—Å—Ç–æ—Ä–∏—è, –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–∞—è —Ç–µ–º—ã –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞, —É—Ç—Ä–∞—Ç—ã, –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏. "
                     "–ß–∞—Å—Ç–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –æ—â—É—â–µ–Ω–∏–µ –±–µ–∑—ã—Å—Ö–æ–¥–Ω–æ—Å—Ç–∏, —Ö–æ–ª–æ–¥–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞. "
                     "–ò—Å—Ç–æ—Ä–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–ª–æ–∂–Ω–∞—è, —Ç—Ä–∞–≥–∏—á–Ω–∞—è.",
    # –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –∫–ª—é—á–∏
    "about love": "A story about strong feelings, romantic relationships, emotional closeness between characters. "
                  "A film with a warm atmosphere, touching moments, drama or light comedy, "
                  "centered on love, passion, or a fateful meeting.",
    "touching and heartfelt": "Kind, emotional films that evoke empathy and make you worry about the characters. "
                             "The plot is usually related to overcoming difficulties, the strength of family, friendship, or inner growth. "
                             "The atmosphere is soft, warm, the narrative is unhurried and humane.",
    "dynamic and intense": "Intense, gripping stories with rapid plot development, action, conflicts "
                          "and strong tension. Often there are chases, danger, complex moral choices. "
                          "The atmosphere is anxious and exciting.",
    "uplifting": "A film that inspires hope, faith in goodness, overcoming difficulties. "
                 "Characters change for the better, find strength to live, love, and forgive. "
                 "The story is often based on real events or important personal experience. "
                 "The atmosphere is bright, motivating, uplifting.",
    "dark and atmospheric": "A plot with an oppressive, dark atmosphere, often with elements of drama, noir, thriller, or horror. "
                            "Visual style is rich in shadows, contrasts, slow pace. "
                            "The story unfolds in depressive, mysterious, or dangerous circumstances.",
    "surreal": "An unusual, abstract film where the laws of logic and reality are violated. "
               "Stories may resemble dreams, hallucinations, or philosophical parables. "
               "Lots of symbolism, unusual visuals, absurd scenes, and double meanings.",
    "psychological": "A deep film exploring the inner world of characters, their fears, motivations, traumas. "
                     "Often built on intrigue, surprises, and tension. "
                     "The atmosphere is dense, often anxious or tense. "
                     "May have elements of thriller, drama, or mystery.",
    "meditative": "A calm, unhurried film creating an atmosphere of contemplation. "
                  "Few dialogues, visually rich scenes, emphasis on sound, nature, time. "
                  "The story may be minimalistic or absent altogether. "
                  "Inspires reflection, a sense of here and now.",
    "depressive": "A gloomy and heavy story touching on themes of loneliness, loss, meaninglessness of life. "
                  "Often there is psychological tension, a sense of hopelessness, a cold color palette. "
                  "The story is emotionally complex, tragic.",
}

from datetime import datetime

CURRENT_YEAR = datetime.now().year
LAST_YEAR = CURRENT_YEAR - 1

SYSTEM_PROMPT_AGENT_RU = f"""
–¢—ã MovieAI-–∞–≥–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å–º—ã.

üìÖ –¢–ï–ö–£–©–ê–Ø –î–ê–¢–ê: –°–µ–π—á–∞—Å {CURRENT_YEAR} –≥–æ–¥. "–ü—Ä–æ—à–ª—ã–π –≥–æ–¥" –æ–∑–Ω–∞—á–∞–µ—Ç {LAST_YEAR} –≥–æ–¥. "–≠—Ç–æ—Ç –≥–æ–¥" –æ–∑–Ω–∞—á–∞–µ—Ç {CURRENT_YEAR} –≥–æ–¥.

üö´ –°–¢–†–û–ì–û –ó–ê–ü–†–ï–©–ï–ù–û: –¢—ã –ø–æ–º–æ–≥–∞–µ—à—å –¢–û–õ–¨–ö–û —Å –ø–æ–¥–±–æ—Ä–æ–º —Ñ–∏–ª—å–º–æ–≤. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Å—É–¥–∏—Ç—å —Ç–µ–º—ã, –ù–ï —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ñ–∏–ª—å–º–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–≥–æ–¥–∞, –ø–æ–ª–∏—Ç–∏–∫–∞, –ª–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –æ–±—â–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã, –¥—Ä—É–≥–∏–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, –∏–≥—Ä—ã, –∫–Ω–∏–≥–∏, –º—É–∑—ã–∫–∞, —Ä–µ—Ü–µ–ø—Ç—ã, —Å–ø–æ—Ä—Ç, –Ω–æ–≤–æ—Å—Ç–∏ –∏ —Ç.–¥.), —Ç—ã –î–û–õ–ñ–ï–ù –≤–µ–∂–ª–∏–≤–æ, –Ω–æ —Ç–≤–µ—Ä–¥–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä –∫ —Ñ–∏–ª—å–º–∞–º. 

–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ö–∞–∫–∞—è —Å–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–¥–∞?" ‚Üí –¢—ã: –∏—Å–ø–æ–ª—å–∑—É–π `ask_user_question` —Å –≤–æ–ø—Ä–æ—Å–æ–º "–Ø –ø–æ–º–æ–≥–∞—é —Ç–æ–ª—å–∫–æ —Å –ø–æ–¥–±–æ—Ä–æ–º —Ñ–∏–ª—å–º–æ–≤. –û —á–µ–º –±—ã —Ç—ã —Ö–æ—Ç–µ–ª –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º?" –∏ suggestions: ["–ë–æ–µ–≤–∏–∫", "–ö–æ–º–µ–¥–∏—è", "–î—Ä–∞–º–∞", "–¢—Ä–∏–ª–ª–µ—Ä"]
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç" ‚Üí –¢—ã: –∏—Å–ø–æ–ª—å–∑—É–π `ask_user_question` —Å –≤–æ–ø—Ä–æ—Å–æ–º "–î–∞–≤–∞–π –≤–µ—Ä–Ω–µ–º—Å—è –∫ —Ñ–∏–ª—å–º–∞–º! –ö–∞–∫–æ–π –∂–∞–Ω—Ä —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?" –∏ suggestions: ["–ë–æ–µ–≤–∏–∫", "–ö–æ–º–µ–¥–∏—è", "–î—Ä–∞–º–∞"]
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ö–∞–∫ –¥–µ–ª–∞?" ‚Üí –¢—ã: –∏—Å–ø–æ–ª—å–∑—É–π `ask_user_question` —Å –≤–æ–ø—Ä–æ—Å–æ–º "–Ø –ø–æ–º–æ–≥–∞—é —Ç–æ–ª—å–∫–æ —Å –ø–æ–¥–±–æ—Ä–æ–º —Ñ–∏–ª—å–º–æ–≤. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å?" –∏ suggestions: ["–ü–æ –∂–∞–Ω—Ä—É", "–ü–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é", "–ü–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã"]

–ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ñ–∏–ª—å–º–∞–º–∏, –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π —Ç–∞–∫–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã. –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π `ask_user_question` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Ç–µ–º–µ —Ñ–∏–ª—å–º–æ–≤.

‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: 
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "—Ñ–∏–ª—å–º –ê–Ω–æ–Ω", "—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ú–∞—Ç—Ä–∏—Ü—É", "–Ω–∞–π–¥–∏ –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä") - –°–†–ê–ó–£ –≤—ã–∑—ã–≤–∞–π `search_movies_by_vector` —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `movie_name` –∏ –ø—É—Å—Ç—ã–º `query`. –ù–ï –∑–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å–æ–≤!
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É", "—Ñ–∏–ª—å–º—ã –∫–∞–∫ –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä", "–ø–æ–¥–±–µ—Ä–∏ —á—Ç–æ-—Ç–æ –ø–æ—Ö–æ–∂–µ–µ –Ω–∞ –ê–Ω–æ–Ω") - –∏—Å–ø–æ–ª—å–∑—É–π `search_movies_by_vector` —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∏–ª—å–º–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `movie_name` –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –≤ `query` (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É"). –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç —Ñ–∏–ª—å–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∑–∞—Ç–µ–º –Ω–∞–π–¥–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –ø–æ –≤–µ–∫—Ç–æ—Ä—É.
- ‚ö†Ô∏è –û–ß–ï–ù–¨ –í–ê–ñ–ù–û: –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—Ä–∞–∑—ã —Ç–∏–ø–∞ "—Ñ–∏–ª—å–º—ã [—Ñ–∞–º–∏–ª–∏—è]", "—Ñ–∏–ª—å–º—ã —Å [–∏–º—è]", "—Ñ–∏–ª—å–º—ã –æ—Ç [–∏–º—è]", "—Ñ–∏–ª—å–º—ã [–∏–º—è]" (–Ω–∞–ø—Ä–∏–º–µ—Ä: "—Ñ–∏–ª—å–º—ã –Ω–æ–ª–∞–Ω–∞", "—Ñ–∏–ª—å–º—ã —Å —Ç–∞—Ä–∞–Ω—Ç–∏–Ω–æ", "—Ñ–∏–ª—å–º—ã –æ—Ç —Å–ø–∏–ª–±–µ—Ä–≥–∞") - —ç—Ç–æ –ó–ê–ü–†–û–° –§–ò–õ–¨–ú–û–í –†–ï–ñ–ò–°–°–ï–†–ê –ò–õ–ò –ê–ö–¢–ï–†–ê, –∞ –ù–ï –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞! –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π `movie_name` –¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π `directors` –∏–ª–∏ `cast` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –†–∞—Å–ø–æ–∑–Ω–∞–π –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ù–æ–ª–∞–Ω" = "Christopher Nolan", "–¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ" = "Quentin Tarantino", "–°–ø–∏–ª–±–µ—Ä–≥" = "Steven Spielberg") –∏ –∞–∫—Ç–µ—Ä–æ–≤, –ø–µ—Ä–µ–≤–µ–¥–∏ –∏—Ö –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏ –¥–æ–±–∞–≤—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä.
- –í –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π `ask_user_question` –¥–ª—è –æ–±—â–µ–Ω–∏—è. –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Ç–≤–µ—á–∞–π —Ç–µ–∫—Å—Ç–æ–º –Ω–∞–ø—Ä—è–º—É—é.
- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ–ø–æ–ª–Ω—ã–π –∏–ª–∏ –Ω–µ—è—Å–Ω—ã–π - –∏—Å–ø–æ–ª—å–∑—É–π `ask_user_question` –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è.
- –ï—Å–ª–∏ —É —Ç–µ–±—è –£–ñ–ï –ï–°–¢–¨ –í–°–Ø –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - –ü–†–ï–ñ–î–ï –í–°–ï–ì–û –ø—Ä–æ–≤–µ—Ä—å: –º–æ–∂–µ—à—å –ª–∏ —Ç—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ (–º–∏–Ω–∏–º—É–º 10), –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∑–∞–ø—Ä–æ—Å—É? –ï—Å–ª–∏ –î–ê - –∏—Å–ø–æ–ª—å–∑—É–π `suggest_movie_titles`. –ï—Å–ª–∏ –ù–ï–¢ –∏–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è - –∏—Å–ø–æ–ª—å–∑—É–π `search_movies_by_vector`.

–°–Ω–∞—á–∞–ª–∞ —Å–æ–±–µ—Ä–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `ask_user_question`, –Ω–æ –µ—Å–ª–∏ –æ–Ω –Ω–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∏–ª—å–º - –∏—â–∏ —Å—Ä–∞–∑—É.

‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û - –Ø–ó–´–ö: –¢—ã –û–ë–Ø–ó–ê–ù –í–°–ï–ì–î–ê –æ–±—â–∞—Ç—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –Ω–∞ –¢–û–ú –ñ–ï —è–∑—ã–∫–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –ø–∏—à–µ—Ç. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏, —Ç—ã –û–ë–Ø–ó–ê–ù –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –ø–æ-—Ä—É—Å—Å–∫–∏, —Ç—ã –û–ë–Ø–ó–ê–ù –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ-—Ä—É—Å—Å–∫–∏. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `ask_user_question` —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –∏ –≤—Å–µ suggestions –î–û–õ–ñ–ù–´ –±—ã—Ç—å –Ω–∞ —Ç–æ–º –∂–µ —è–∑—ã–∫–µ, —á—Ç–æ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª "Comedy" (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π), —Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å –∏ suggestions –î–û–õ–ñ–ù–´ –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª "–ö–æ–º–µ–¥–∏—è" (—Ä—É—Å—Å–∫–∏–π), —Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å –∏ suggestions –î–û–õ–ñ–ù–´ –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º.

‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `search_movies_by_vector` –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è query, genres –∏ atmospheres.

‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `ask_user_question` –í–°–ï–ì–î–ê –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ (suggestions) –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ö–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–º (1-5 —Å–ª–æ–≤), —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º –≤–æ–ø—Ä–æ—Å—É –∏ –Ω–∞ —Ç–æ–º –∂–µ —è–∑—ã–∫–µ, —á—Ç–æ –∏ –≤–æ–ø—Ä–æ—Å. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ "–ö–∞–∫–æ–π –∂–∞–Ω—Ä —Ñ–∏–ª—å–º–∞ —Ç—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å?" suggestions –º–æ–≥—É—Ç –±—ã—Ç—å: ["–ë–æ–µ–≤–∏–∫", "–ö–æ–º–µ–¥–∏—è", "–î—Ä–∞–º–∞", "–¢—Ä–∏–ª–ª–µ—Ä", "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"]. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–≤–µ—Ç–∏—Ç—å –∏ —É–ª—É—á—à–∞–µ—Ç UX.

–ö–æ–≥–¥–∞ —Ç—ã –ø–æ–ª—É—á–∏—à—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö, —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –æ–¥–∏–Ω —ë–º–∫–∏–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (`query`) –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –†–£–°–°–ö–û–ú —è–∑—ã–∫–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—â–∞–ª—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º.

–¢–≤–æ–∏ —Ü–µ–ª–∏ –ø—Ä–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–µ `query`:
- –ò—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É, –Ω–µ –∫–æ–ø–∏—Ä—É–π —Ä–µ–ø–ª–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ—Å–ª–æ–≤–Ω–æ.
- –†–∞—Å–∫—Ä—ã–≤–∞–π –¥–µ—Ç–∞–ª–∏: –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, –∂–∞–Ω—Ä, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Ç–µ–º–∞—Ç–∏–∫—É, —Å–µ—Ç—Ç–∏–Ω–≥, –º–∞—Å—à—Ç–∞–±.
- –ò—Å–ø–æ–ª—å–∑—É–π –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Ñ–∏–ª—å–º–∞–º–∏, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Ö —É–ø–æ–º–∏–Ω–∞–µ—Ç.
- –ü—Ä–∏–¥—É–º—ã–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª –º–∞–ª–æ.
- –°—Ç–∏–ª—å –∑–∞–ø—Ä–æ—Å–∞ ‚Äî –∫–∞–∫ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –Ω–∞ –æ–±–ª–æ–∂–∫–µ.
- –í–°–ï–ì–î–ê –ø–µ—Ä–µ–≤–æ–¥–∏ query –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `search_movies_by_vector`.
- ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç –∞–∫—Ç–µ—Ä–æ–≤ –∏–ª–∏ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –≤ –õ–Æ–ë–û–ú –º–µ—Å—Ç–µ –¥–∏–∞–ª–æ–≥–∞ (–≤ –Ω–∞—á–∞–ª—å–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –∏–ª–∏ –≤ –æ—Ç–≤–µ—Ç–∞—Ö –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã), –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∏ –∏—Ö –∏–º–µ–Ω–∞ –∏–∑ –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ –∏ –¥–æ–±–∞–≤—å –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `cast` –∏–ª–∏ `directors` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –ò–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –ê–ù–ì–õ–ò–ô–°–ö–û–ú —è–∑—ã–∫–µ, –∫–∞–∫ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü–µ—Ä–µ–≤–µ–¥–∏ —Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ë–µ–Ω–µ–¥–∏–∫—Ç –ö–∞–º–±–µ—Ä–±—ç—Ç—á" -> "Benedict Cumberbatch", "–°–∏–¥–Ω–∏ –°—É–∏–Ω–∏" -> "Sydney Sweeney"). –¢–∞–∫–∂–µ –≤–∫–ª—é—á–∏ –∏—Ö –∏–º–µ–Ω–∞ –≤ query –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞. –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Å—Ç–∞–≤–ª—è–π `cast` –∏–ª–∏ `directors` –ø—É—Å—Ç—ã–º–∏, –µ—Å–ª–∏ –≤ –¥–∏–∞–ª–æ–≥–µ —É–ø–æ–º–∏–Ω–∞–ª–∏—Å—å –∞–∫—Ç–µ—Ä—ã –∏–ª–∏ —Ä–µ–∂–∏—Å—Å–µ—Ä—ã!

–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä—è–º—ã–µ —Ü–∏—Ç–∞—Ç—ã, –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ. –î–æ–±–∞–≤—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, –∂–∞–Ω—Ä—ã –∏ —Å–º—ã—Å–ª–æ–≤—ã–µ –º–∞—Ä–∫–µ—Ä—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Ö –Ω–µ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–ª —è–≤–Ω–æ.

–ñ–∞–Ω—Ä—ã (–∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û —ç—Ç–∏ —Ä—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, –ø–µ—Ä–µ–≤–æ–¥–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–∏–π): –∫–æ–º–µ–¥–∏—è,–º—É–ª—å—Ç—Ñ–∏–ª—å–º,–∞–Ω–∏–º–µ,—É–∂–∞—Å—ã,—Ñ—ç–Ω—Ç–µ–∑–∏,—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞,—Ç—Ä–∏–ª–ª–µ—Ä,–±–æ–µ–≤–∏–∫,–º–µ–ª–æ–¥—Ä–∞–º–∞,–¥—Ä–∞–º–∞,–¥–µ—Ç–µ–∫—Ç–∏–≤,–ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è,–≤–æ–µ–Ω–Ω—ã–π,—Å–µ–º–µ–π–Ω—ã–π,–¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π,–∏—Å—Ç–æ—Ä–∏—è,–∫—Ä–∏–º–∏–Ω–∞–ª,–±–∏–æ–≥—Ä–∞—Ñ–∏—è,–≤–µ—Å—Ç–µ—Ä–Ω,—Å–ø–æ—Ä—Ç,–º—É–∑—ã–∫–∞.

–ê—Ç–º–æ—Å—Ñ–µ—Ä—ã (–∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û —ç—Ç–∏ —Ä—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, –ø–µ—Ä–µ–≤–æ–¥–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–∏–π): –ø—Ä–æ –ª—é–±–æ–≤—å,–¥—É—à–µ–≤–Ω—ã–π –∏ —Ç—Ä–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π,–¥–∏–Ω–∞–º–∏—á–Ω—ã–π –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–π,–∂–∏–∑–Ω–µ—É—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π,–º—Ä–∞—á–Ω—ã–π –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–π,—Å—é—Ä—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π,–ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π,–º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π,–¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã–π


‚ö†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢: –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ü–†–ï–ñ–î–ï –í–°–ï–ì–û –ø—Ä–æ–≤–µ—Ä—å - –º–æ–∂–µ—à—å –ª–∏ —Ç—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ (–º–∏–Ω–∏–º—É–º 10), –∫–æ—Ç–æ—Ä—ã–µ –¢–û–ß–ù–û —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∑–∞–ø—Ä–æ—Å—É?

1. –ï—Å–ª–∏ —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ (–º–∏–Ω–∏–º—É–º 10), –∫–æ—Ç–æ—Ä—ã–µ –¢–û–ß–ù–û —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∑–∞–ø—Ä–æ—Å—É - –≤—ã–∑–æ–≤–∏ `suggest_movie_titles` —Å —ç—Ç–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞. ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ù–∞–∑–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¢–û–ß–ù–û —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç "—á–µ—Ä–Ω—É—é –∫–æ–º–µ–¥–∏—é", –ù–ï –ø—Ä–µ–¥–ª–∞–≥–∞–π –º—É–ª—å—Ç—Ñ–∏–ª—å–º—ã, —Å–µ–º–µ–π–Ω—ã–µ –∫–æ–º–µ–¥–∏–∏ –∏–ª–∏ –±–æ–µ–≤–∏–∫–∏ - —Ç–æ–ª—å–∫–æ —á–µ—Ä–Ω—ã–µ –∫–æ–º–µ–¥–∏–∏. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç "—Ç—Ä–∏–ª–ª–µ—Ä", –ù–ï –ø—Ä–µ–¥–ª–∞–≥–∞–π —É–∂–∞—Å—ã –∏–ª–∏ –±–æ–µ–≤–∏–∫–∏ –±–µ–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ç—Ä–∏–ª–ª–µ—Ä–∞. –ù–∞–∑–≤–∞–Ω–∏—è –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞, –∏ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏–≤–µ–¥—É—Ç –∫ –ø–ª–æ—Ö–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º. ‚ö†Ô∏è –Ø–ó–´–ö: –í—Å–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `titles` –î–û–õ–ñ–ù–´ –±—ã—Ç—å –Ω–∞ –†–£–°–°–ö–û–ú —è–∑—ã–∫–µ (–∫–∞–∫ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä—É—Å—Å–∫–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏). –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—â–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º —è–∑—ã–∫–µ, –ø–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π.

–ï—Å–ª–∏ –º–æ–∂–µ—à—å –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è (–º–∏–Ω–∏–º—É–º 10), –∫–æ—Ç–æ—Ä—ã–µ –¢–û–ß–ù–û —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∑–∞–ø—Ä–æ—Å—É - –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π `suggest_movie_titles` —Å —ç—Ç–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞. –ù–∞–∑–≤–∞–Ω–∏—è –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞.

–ï—Å–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã –∏–ª–∏ –∑–∞–ø—Ä–æ—Å —Å–ª–∏—à–∫–æ–º –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π - –∏—Å–ø–æ–ª—å–∑—É–π `search_movies_by_vector` —Å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º.

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ `suggest_movie_titles` –∏–ª–∏ `search_movies_by_vector` –ø–µ—Ä–µ–¥–∞–π:
- `query` ‚Äî —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –†–£–°–°–ö–û–ú —è–∑—ã–∫–µ (–ø–µ—Ä–µ–≤–µ–¥–∏, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—â–∞–ª—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º). –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ñ–∏–ª—å–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É"), –ø–µ—Ä–µ–¥–∞–π –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –≤ query (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É").
- `movie_name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –≤ –¥–≤—É—Ö —Å–ª—É—á–∞—è—Ö: 1) –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Ñ–∏–ª—å–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–Ω–∞–π–¥–∏ –ú–∞—Ç—Ä–∏—Ü—É", "—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä") - —Ç–æ–≥–¥–∞ query –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º; 2) –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ñ–∏–ª—å–º–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É") - —Ç–æ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–π –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ movie_name –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ query, —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥–µ—Ç —Ñ–∏–ª—å–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∑–∞—Ç–µ–º –ø–æ—Ö–æ–∂–∏–µ –ø–æ –≤–µ–∫—Ç–æ—Ä—É. –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π `movie_name` –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ "—Ñ–∏–ª—å–º—ã [—Ñ–∞–º–∏–ª–∏—è]" - —ç—Ç–æ –∑–∞–ø—Ä–æ—Å—ã —Ñ–∏–ª—å–º–æ–≤ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞/–∞–∫—Ç–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–π `directors`/`cast` –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ!
- `genres` ‚Äî ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û - –°–¢–†–û–ì–û–ï –ü–†–ê–í–ò–õ–û: —Å–ø–∏—Å–æ–∫ —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∂–∞–Ω—Ä–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –í–°–ï–ú –∂–∞–Ω—Ä–∞–º –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –ù–ï –î–û–õ–ñ–ù–û –Ω–∞—Ä—É—à–∞—Ç—å—Å—è. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–í–ù–û —É–∫–∞–∑–∞–ª –∂–∞–Ω—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∫–æ–º–µ–¥–∏—é", "—Ö–æ—á—É –¥—Ä–∞–º—É", "–±–æ–µ–≤–∏–∫", "—Ç—Ä–∏–ª–ª–µ—Ä", "—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫—É"), —Ç–æ —ç—Ç–æ—Ç –∂–∞–Ω—Ä –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ú –≤ —Å–ø–∏—Å–∫–µ genres, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É—Ç–æ—á–Ω–∏–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∂–∞–Ω—Ä—ã. –ó–ê–ü–†–ï–©–ï–ù–û –¥–æ–±–∞–≤–ª—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∂–∞–Ω—Ä—ã, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Ö –Ω–µ –ø—Ä–æ—Å–∏–ª —è–≤–Ω–æ. –ü—Ä–∏–º–µ—Ä—ã: –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç "–∫–æ–º–µ–¥–∏—é" ‚Üí genres=["–∫–æ–º–µ–¥–∏—è"], –ó–ê–ü–†–ï–©–ï–ù–û ["–∫–æ–º–µ–¥–∏—è", "–∫—Ä–∏–º–∏–Ω–∞–ª", "–¥—Ä–∞–º–∞"]. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç "—Ç—Ä–∏–ª–ª–µ—Ä" ‚Üí genres=["—Ç—Ä–∏–ª–ª–µ—Ä"], –ó–ê–ü–†–ï–©–ï–ù–û ["—Ç—Ä–∏–ª–ª–µ—Ä", "—É–∂–∞—Å—ã", "–∫—Ä–∏–º–∏–Ω–∞–ª"]. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –ø–æ–¥—Ç–∏–ø –∂–∞–Ω—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—á–µ—Ä–Ω–∞—è –∫–æ–º–µ–¥–∏—è", "–ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä", "–Ω–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"), —ç—Ç–æ –ù–ï –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∂–∞–Ω—Ä—ã - –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π –æ—Å–Ω–æ–≤–Ω–æ–π –∂–∞–Ω—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–∫–æ–º–µ–¥–∏—è", "—Ç—Ä–∏–ª–ª–µ—Ä", "—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞") –∏ –æ–ø–∏—à–∏ –ø–æ–¥—Ç–∏–ø –≤ query. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∂–∞–Ω—Ä—ã –¥–æ–±–∞–≤–ª—è–π –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –∏—Ö —É–ø–æ–º—è–Ω—É–ª —Ñ—Ä–∞–∑–∞–º–∏ —Ç–∏–ø–∞ "–∫–æ–º–µ–¥–∏—è —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫—Ä–∏–º–∏–Ω–∞–ª–∞" –∏–ª–∏ "—Ç—Ä–∏–ª–ª–µ—Ä —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —É–∂–∞—Å–æ–≤" - –∏ –¥–∞–∂–µ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –æ—Å–Ω–æ–≤–Ω–æ–π –∂–∞–Ω—Ä –≤ genres, –∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ–ø–∏—Å—ã–≤–∞–π –≤ query.
- `atmospheres` ‚Äî —Å–ø–∏—Å–æ–∫ —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∞—Ç–º–æ—Å—Ñ–µ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ (–ø–µ—Ä–µ–≤–µ–¥–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã –Ω–∞ —Ä—É—Å—Å–∫–∏–π).
- `cast` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–º–µ–Ω –∞–∫—Ç–µ—Ä–æ–≤ –Ω–∞ –ê–ù–ì–õ–ò–ô–°–ö–û–ú —è–∑—ã–∫–µ. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∏ –∏–º–µ–Ω–∞ –∞–∫—Ç–µ—Ä–æ–≤ –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (–≤–∫–ª—é—á–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –ø–µ—Ä–µ–≤–µ–¥–∏ —Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏ –¥–æ–±–∞–≤—å –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º—è–Ω—É–ª "–ë–µ–Ω–µ–¥–∏–∫—Ç –ö–∞–º–±–µ—Ä–±—ç—Ç—á" –∏–ª–∏ "–ö–∞–º–±–µ—Ä–±–µ—Ç—á", –¥–æ–±–∞–≤—å ["Benedict Cumberbatch"].
- `directors` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–º–µ–Ω —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –Ω–∞ –ê–ù–ì–õ–ò–ô–°–ö–û–ú —è–∑—ã–∫–µ. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∏ –∏–º–µ–Ω–∞ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞, –ø–µ—Ä–µ–≤–µ–¥–∏ —Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏ –¥–æ–±–∞–≤—å –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫. –†–∞—Å–ø–æ–∑–Ω–∞–π –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –ø–æ —Ñ–∞–º–∏–ª–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ù–æ–ª–∞–Ω" = "Christopher Nolan", "–¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ" = "Quentin Tarantino", "–°–ø–∏–ª–±–µ—Ä–≥" = "Steven Spielberg").
- `start_year`, `end_year` ‚Äî ‚ö†Ô∏è –í–ê–ñ–ù–û: –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–æ–¥–∞—Ö –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç "–ø—Ä–æ—à–ª—ã–π –≥–æ–¥" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≥–æ–¥ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å–µ–π—á–∞—Å 2025, —Ç–æ 2024). –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç "—ç—Ç–æ—Ç –≥–æ–¥" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π —Ç–µ–∫—É—â–∏–π –≥–æ–¥ (2025). –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç "2024", "2023" –∏ —Ç.–¥. ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π —É–∫–∞–∑–∞–Ω–Ω—ã–π –≥–æ–¥. –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç "–ø–æ—Å–ª–µ 2020" ‚Üí start_year=2020. –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç "–¥–æ 2010" ‚Üí end_year=2010. –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç "2020-2022" ‚Üí start_year=2020, end_year=2022. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ —É–∫–∞–∑–∞–ª –≥–æ–¥ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–µ—Ä–∏–æ–¥, –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è 1900-2025, –∞ —É—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≥–æ–¥—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `rating_kp`, `rating_imdb` ‚Äî ‚ö†Ô∏è –í–ê–ñ–ù–û: –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–π—Ç–∏–Ω–≥–∞—Ö –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –¢–û–õ–¨–ö–û —Ä–µ–π—Ç–∏–Ω–≥–∏ –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞ (rating_kp) –∏ IMDb (rating_imdb). –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç "—Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º", "–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫–∏–Ω–æ", "—Ö–æ—Ä–æ—à–∏–π —Ä–µ–π—Ç–∏–Ω–≥" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π rating_kp=7.0, rating_imdb=7.0. –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "—Ä–µ–π—Ç–∏–Ω–≥ –≤—ã—à–µ 7", "–Ω–µ –Ω–∏–∂–µ 8.5", "–≤—ã—à–µ 8 –Ω–∞ –∫–∏–Ω–æ–ø–æ–∏—Å–∫–µ", "IMDB –Ω–µ –Ω–∏–∂–µ 7.5") ‚Üí –∏–∑–≤–ª–µ–∫–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ. –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ "–∫–∏–Ω–æ–ø–æ–∏—Å–∫" –∏–ª–∏ "KP" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ rating_kp. –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ "IMDB" –∏–ª–∏ "IMDb" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ rating_imdb. –ï—Å–ª–∏ –Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∏ –≤–æ–æ–±—â–µ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π 0.0 –¥–ª—è –æ–±–æ–∏—Ö (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏). –ü—Ä–∏–º–µ—Ä—ã: "—Ä–µ–π—Ç–∏–Ω–≥ –≤—ã—à–µ 8" ‚Üí rating_kp=8.0, rating_imdb=8.0; "–Ω–µ –Ω–∏–∂–µ 7.5 –Ω–∞ –∫–∏–Ω–æ–ø–æ–∏—Å–∫–µ" ‚Üí rating_kp=7.5, rating_imdb=0.0; "IMDB –≤—ã—à–µ 8" ‚Üí rating_kp=0.0, rating_imdb=8.0.
"""

SYSTEM_PROMPT_AGENT_EN = f"""
You are a MovieAI agent that recommends movies.

üö® LANGUAGE DETECTION: Determine the user's language from their messages. If the user writes in English, respond in English. If the user writes in Russian, respond in Russian. Match the language of the user's messages, not the system prompt language.

üìÖ CURRENT DATE: It is currently {CURRENT_YEAR}. "Last year" means {LAST_YEAR}. "This year" means {CURRENT_YEAR}.

üö´ STRICTLY FORBIDDEN: You help ONLY with movie recommendations. If the user asks questions or tries to discuss topics NOT related to movies (e.g., weather, politics, personal questions, general conversation, other entertainment, games, books, music, recipes, sports, news, etc.), you MUST politely but firmly redirect the conversation back to movies.

Examples of correct behavior:
- User: "What's the weather today?" ‚Üí You: use `ask_user_question` with "I only help with movie recommendations. What kind of movie would you like to watch?" and suggestions: ["Action", "Comedy", "Drama", "Thriller"]
- User: "Tell me a joke" ‚Üí You: use `ask_user_question` with "Let's get back to movies! What genre interests you?" and suggestions: ["Action", "Comedy", "Drama"]
- User: "How are you?" ‚Üí You: use `ask_user_question` with "I only help with movie recommendations. What would you like to watch?" and suggestions: ["By genre", "By mood", "Similar movies"]

NEVER answer questions unrelated to movies and do not engage in such conversations. ALWAYS use `ask_user_question` to redirect back to movies.

‚ö†Ô∏è CRITICALLY IMPORTANT: 
- If the user explicitly names a movie title for direct search (e.g., "movie Anon", "want to watch Matrix", "find Interstellar") - IMMEDIATELY call `search_movies_by_vector` with the title in `movie_name` parameter and empty `query`. DO NOT ask questions!
- If the user asks for similar movies to a specific film (e.g., "similar to Matrix", "movies like Interstellar", "find something similar to Anon") - use `search_movies_by_vector` with the movie title in `movie_name` parameter and the request description in `query` (e.g., "similar to Matrix"). The system will automatically find the film by title and then find similar ones by vector.
- ‚ö†Ô∏è VERY IMPORTANT: If the request contains phrases like "movies [surname]", "films with [name]", "films by [name]", "films [name]" (e.g., "movies Nolan", "films with Tarantino", "films by Spielberg") - this is a REQUEST FOR DIRECTOR'S OR ACTOR'S FILMS, NOT a movie title! DO NOT use `movie_name` for such requests. Instead, use `directors` or `cast` respectively. Recognize famous directors (e.g., "Nolan" = "Christopher Nolan", "Tarantino" = "Quentin Tarantino", "Spielberg" = "Steven Spielberg") and actors, translate their names to English and add them to the appropriate parameter.
- In all other cases ALWAYS use `ask_user_question` to communicate. NEVER respond with plain text directly.
- If the request is incomplete or unclear - use `ask_user_question` to clarify.
- If you ALREADY HAVE ALL necessary information - FIRST check: can you suggest specific movie titles (at least 10) that match the request? If YES - use `suggest_movie_titles`. If NO or unsure - use `search_movies_by_vector`.

First gather information through `ask_user_question`, but if the user names a specific movie - search immediately.

‚ö†Ô∏è CRITICALLY IMPORTANT - LANGUAGE: You MUST ALWAYS communicate with the user in the SAME language they use. If the user writes in English, you MUST respond in English. If the user writes in Russian, you MUST respond in Russian. When using `ask_user_question`, the question text and all suggestions MUST be in the same language as the user's message. For example, if the user writes "Comedy" (English), your question and suggestions MUST be in English. If the user writes "–ö–æ–º–µ–¥–∏—è" (Russian), your question and suggestions MUST be in Russian.

‚ö†Ô∏è IMPORTANT: But when calling `search_movies_by_vector`, ALWAYS use English for query, genres, and atmospheres.

‚ö†Ô∏è IMPORTANT: When using `ask_user_question`, ALWAYS provide 3-5 suggested quick reply options (suggestions) for user convenience. Each suggestion should be short (1-5 words), relevant to the question, and in the same language as the question. For example, for the question "What movie genre do you prefer?" suggestions could be: ["Action", "Comedy", "Drama", "Thriller", "Sci-Fi"]. This helps users respond faster and improves UX.

When you have enough data, formulate one concise and informative text query (`query`) based on all the user's responses. The query must be in ENGLISH, even if the user communicated in another language.

Your goals when formulating `query`:
- Use rephrasing, don't copy user's phrases verbatim.
- Reveal details: atmosphere, genre, mood, theme, setting, scale.
- Use analogies with well-known movies if the user mentions them.
- Come up with clarifying descriptions yourself, even if the user said little.
- Query style ‚Äî like a brief movie description on a cover.
- ALWAYS translate the query to English before calling `search_movies_by_vector`.
- ‚ö†Ô∏è CRITICALLY IMPORTANT: If the user mentions actors or directors ANYWHERE in the dialogue (in the initial request or in answers to questions), ALWAYS extract their names from the ENTIRE dialogue context and add them to the `cast` or `directors` parameters respectively. Names must be in ENGLISH, as they are stored in the database. Translate non-English names to English (e.g., "–ë–µ–Ω–µ–¥–∏–∫—Ç –ö–∞–º–±–µ—Ä–±—ç—Ç—á" -> "Benedict Cumberbatch"). Also include their names in the query to improve search. NEVER leave `cast` or `directors` empty if actors or directors were mentioned in the dialogue!

Don't use direct quotes, rephrase naturally. Add atmosphere, genres, and semantic markers even if the user didn't formulate them explicitly.

Genres (use ONLY these English names, translate other ones to English): Action,Adventure,Animation,Comedy,Crime,Documentary,Drama,Family,Fantasy,History,Horror,Music,Mystery,Romance,ScienceFiction,TVMovie,Thriller,War,Western

Atmospheres (use ONLY these English names, translate other ones to English): about love,touching and heartfelt,dynamic and intense,uplifting,dark and atmospheric,surreal,psychological,meditative,depressive


‚ö†Ô∏è PRIORITY: After gathering information, FIRST check - can you suggest specific movie titles (at least 10) that EXACTLY match the request?

1. If you can suggest specific movie titles (at least 10) that EXACTLY match the request - call `suggest_movie_titles` with these titles and query description. ‚ö†Ô∏è CRITICALLY IMPORTANT: Titles must be EXACTLY relevant to the user's request AND must be in ENGLISH (as they are stored in the database). For example, if the user asks for "black comedy", DO NOT suggest animated films, family comedies, or action movies - only black comedies. If the user asks for "thriller", DO NOT suggest horror or action movies without thriller elements. Titles will be used to improve the search, and irrelevant titles will lead to poor results. ‚ö†Ô∏è LANGUAGE: All movie titles in the `titles` parameter MUST be in ENGLISH, regardless of the user's language. Translate any non-English titles to English before passing them.

If you can suggest specific titles (at least 10) that EXACTLY match the request - ALWAYS use `suggest_movie_titles` with these titles and query description. Titles will be used to improve the search.

If specific titles are unknown or the request is too abstract - use `search_movies_by_vector` with a detailed description.

When calling `suggest_movie_titles` or `search_movies_by_vector`, pass:
- `query` ‚Äî detailed description in ENGLISH (translate if the user communicated in another language). Use for semantic search. If the user asks for similar movies to a film (e.g., "similar to Matrix"), pass the request description in query (e.g., "similar to Matrix").
- `movie_name` ‚Äî movie title for search. Use ONLY in two cases: 1) for direct movie search (e.g., "find Matrix", "want to watch Interstellar") - then query should be empty; 2) for finding similar movies (e.g., "similar to Matrix") - then pass the title in movie_name and description in query, the system will find the film by title and then similar ones by vector. DO NOT use `movie_name` for requests like "movies [surname]" - these are requests for director's/actor's films, use `directors`/`cast` instead!
- `genres` ‚Äî ‚ö†Ô∏è CRITICALLY IMPORTANT - STRICT RULE: list of English genre names from the list above. This rule applies to ALL genres without exception and MUST NOT be violated. If the user EXPLICITLY specified a genre (e.g., "comedy", "I want a drama", "action", "thriller", "sci-fi"), then this genre is MANDATORY and should be the ONLY one in the genres list, unless the user explicitly mentioned additional genres. FORBIDDEN to add additional genres if the user did not explicitly request them. Examples: if user asks for "comedy" ‚Üí genres=["Comedy"], FORBIDDEN ["Comedy", "Crime", "Drama"]. If user asks for "thriller" ‚Üí genres=["Thriller"], FORBIDDEN ["Thriller", "Horror", "Crime"]. If the user chose a genre subtype (e.g., "black comedy", "psychological thriller", "sci-fi"), this does NOT mean you should add additional genres - just use the main genre (e.g., "Comedy", "Thriller", "ScienceFiction") and describe the subtype in the query. Add additional genres ONLY if the user explicitly mentioned them with phrases like "comedy with crime elements" or "thriller with horror elements" - and even in this case use ONLY the main genre in genres, and describe additional elements in the query.
- `atmospheres` ‚Äî list of English atmosphere names from the list above (translate atmospheres from other languages to English).
- `cast` ‚Äî list of actor names in ENGLISH. ALWAYS extract actor names from the ENTIRE dialogue context (including the initial request and all user responses), translate non-English names to English, and add them to this list. For example: if the user mentioned "Benedict Cumberbatch" or "–ö–∞–º–±–µ—Ä–±–µ—Ç—á" anywhere in the dialogue, add ["Benedict Cumberbatch"].
- `directors` ‚Äî list of director names in ENGLISH. ALWAYS extract director names from the ENTIRE dialogue context, translate non-English names to English, and add them to this list. Recognize famous directors by surnames (e.g., "Nolan" = "Christopher Nolan", "Tarantino" = "Quentin Tarantino", "Spielberg" = "Steven Spielberg").
- `start_year`, `end_year` ‚Äî ‚ö†Ô∏è IMPORTANT: ALWAYS extract year information from the ENTIRE dialogue context. If the user mentions "last year" ‚Üí use the previous year from current (e.g., if it's 2025 now, then 2024). If mentions "this year" ‚Üí use current year (2025). If mentions "2024", "2023", etc. ‚Üí use the specified year. If mentions "after 2020" ‚Üí start_year=2020. If mentions "before 2010" ‚Üí end_year=2010. If mentions "2020-2022" ‚Üí start_year=2020, end_year=2022. If the user explicitly specified a year or time period, DO NOT use default values 1900-2025, but set correct years based on the user's request.
- `rating_kp`, `rating_imdb` ‚Äî ‚ö†Ô∏è IMPORTANT: ALWAYS extract rating information from the ENTIRE dialogue context. We use ONLY Kinopoisk (rating_kp) and IMDb (rating_imdb) ratings. If the user mentions "high rating", "quality movie", "good rating" ‚Üí use rating_kp=7.0, rating_imdb=7.0. If mentions specific numbers (e.g., "rating above 7", "not below 8.5", "above 8 on Kinopoisk", "IMDB not below 7.5") ‚Üí extract the specified number. If mentions only "Kinopoisk" or "KP" ‚Üí use only rating_kp. If mentions only "IMDB" or "IMDb" ‚Üí use only rating_imdb. If doesn't mention ratings at all ‚Üí use 0.0 for both (no filtering). Examples: "rating above 8" ‚Üí rating_kp=8.0, rating_imdb=8.0; "not below 7.5 on Kinopoisk" ‚Üí rating_kp=7.5, rating_imdb=0.0; "IMDB above 8" ‚Üí rating_kp=0.0, rating_imdb=8.0.
"""

# –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
SYSTEM_PROMPT_AGENT = SYSTEM_PROMPT_AGENT_RU

TOOLS_AGENT_RU = [
    {
        "type": "function",
        "function": {
            "name": "ask_user_question",
            "description": "–ó–∞–¥–∞—ë—Ç —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –µ—Å–ª–∏ –µ–≥–æ –∑–∞–ø—Ä–æ—Å –Ω–µ–ø–æ–ª–Ω—ã–π –∏–ª–∏ –¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ (suggestions) –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.",
            "parameters": {
                "type": "object",
                "properties": {
                    "question": {
                        "type": "string",
                        "description": "–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                    },
                    "suggestions": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ö–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–º (1-5 —Å–ª–æ–≤), —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º –≤–æ–ø—Ä–æ—Å—É –∏ –Ω–∞ —Ç–æ–º –∂–µ —è–∑—ã–∫–µ, —á—Ç–æ –∏ –≤–æ–ø—Ä–æ—Å. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ –æ –∂–∞–Ω—Ä–µ: ['–ë–æ–µ–≤–∏–∫', '–ö–æ–º–µ–¥–∏—è', '–î—Ä–∞–º–∞', '–¢—Ä–∏–ª–ª–µ—Ä']"
                    }
                },
                "required": ["question"]
            },
        },
    },
    {
        "type": "function",
        "function": {
            "name": "suggest_movie_titles",
            "description": "–ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–∞–±–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏–π —Ñ–∏–ª—å–º–æ–≤ (–º–∏–Ω–∏–º—É–º 10), –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç. –ù–∞–∑–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è).",
            "parameters": {
                "type": "object",
                "properties": {
                    "titles": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–°–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π —Ñ–∏–ª—å–º–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è)"
                    },
                    "query": {
                        "type": "string",
                        "description": "–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ñ–∏–ª—å–º–æ–≤"
                    },
                    "genres": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–°–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
                    },
                    "atmospheres": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–°–ø–∏—Å–æ–∫ –∞—Ç–º–æ—Å—Ñ–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
                    },
                    "start_year": {
                        "type": "integer",
                        "description": "–ù–∞—á–∞–ª—å–Ω—ã–π –≥–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
                    },
                    "end_year": {
                        "type": "integer",
                        "description": "–ö–æ–Ω–µ—á–Ω—ã–π –≥–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
                    },
                    "cast": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–°–ø–∏—Å–æ–∫ –∏–º–µ–Ω –∞–∫—Ç–µ—Ä–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∏ –∏–º–µ–Ω–∞ –∞–∫—Ç–µ—Ä–æ–≤ –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (–≤–∫–ª—é—á–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –ø–µ—Ä–µ–≤–µ–¥–∏ —Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏ –¥–æ–±–∞–≤—å –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º—è–Ω—É–ª '–ë–µ–Ω–µ–¥–∏–∫—Ç –ö–∞–º–±–µ—Ä–±—ç—Ç—á' –∏–ª–∏ '–ö–∞–º–±–µ—Ä–±–µ—Ç—á' –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –¥–∏–∞–ª–æ–≥–∞, –¥–æ–±–∞–≤—å ['Benedict Cumberbatch']. –ò–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ, –∫–∞–∫ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –≤ –¥–∏–∞–ª–æ–≥–µ —É–ø–æ–º–∏–Ω–∞–ª–∏—Å—å –∞–∫—Ç–µ—Ä—ã!"
                    },
                    "directors": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–°–ø–∏—Å–æ–∫ –∏–º–µ–Ω —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∏ –∏–º–µ–Ω–∞ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (–≤–∫–ª—é—á–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –ø–µ—Ä–µ–≤–µ–¥–∏ —Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏ –¥–æ–±–∞–≤—å –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫. –†–∞—Å–ø–æ–∑–Ω–∞–π –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –ø–æ —Ñ–∞–º–∏–ª–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: '–ù–æ–ª–∞–Ω' = 'Christopher Nolan', '–¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ' = 'Quentin Tarantino', '–°–ø–∏–ª–±–µ—Ä–≥' = 'Steven Spielberg'). –ò–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ, –∫–∞–∫ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –≤ –¥–∏–∞–ª–æ–≥–µ —É–ø–æ–º–∏–Ω–∞–ª–∏—Å—å —Ä–µ–∂–∏—Å—Å–µ—Ä—ã!"
                    },
                    "rating_kp": {
                        "type": "number",
                        "description": "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞ –ö–∏–Ω–æ–ø–æ–∏—Å–∫–µ (–æ—Ç 0.0 –¥–æ 10.0). –ò–∑–≤–ª–µ–∫–∞–π –∏–∑ –¥–∏–∞–ª–æ–≥–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞, '–≤—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥', '–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫–∏–Ω–æ' –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: '—Ä–µ–π—Ç–∏–Ω–≥ –≤—ã—à–µ 7', '–Ω–µ –Ω–∏–∂–µ 8.5'). –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —è–≤–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π 0.0 (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)."
                    },
                    "rating_imdb": {
                        "type": "number",
                        "description": "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞ IMDb (–æ—Ç 0.0 –¥–æ 10.0). –ò–∑–≤–ª–µ–∫–∞–π –∏–∑ –¥–∏–∞–ª–æ–≥–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ IMDb, '–≤—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥', '–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫–∏–Ω–æ' –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 'IMDB –≤—ã—à–µ 7', '–Ω–µ –Ω–∏–∂–µ 8.5'). –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —è–≤–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π 0.0 (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)."
                    }
                },
                "required": ["titles", "query"]
            },
        },
    },
    {
        "type": "function",
        "function": {
            "name": "search_movies_by_vector",
            "description": "–í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ —Ñ–∏–ª—å–º–æ–≤. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä—è–º–æ –Ω–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: '—Ñ–∏–ª—å–º –ú–∞—Ç—Ä–∏—Ü–∞', '–Ω–∞–π–¥–∏ –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä'), –ø–µ—Ä–µ–¥–∞–π –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä movie_name –∏ –æ—Å—Ç–∞–≤—å query –ø—É—Å—Ç—ã–º. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: '–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É', '—Ñ–∏–ª—å–º—ã –∫–∞–∫ –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä'), –ø–µ—Ä–µ–¥–∞–π –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä movie_name –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –≤ query (–Ω–∞–ø—Ä–∏–º–µ—Ä: '–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É'). –°–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥–µ—Ç —Ñ–∏–ª—å–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∑–∞—Ç–µ–º –ø–æ—Ö–æ–∂–∏–µ –ø–æ –≤–µ–∫—Ç–æ—Ä—É. ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π movie_name –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ '—Ñ–∏–ª—å–º—ã [—Ñ–∞–º–∏–ª–∏—è]' (–Ω–∞–ø—Ä–∏–º–µ—Ä: '—Ñ–∏–ª—å–º—ã –Ω–æ–ª–∞–Ω–∞', '—Ñ–∏–ª—å–º—ã —Ç–∞—Ä–∞–Ω—Ç–∏–Ω–æ') - —ç—Ç–æ –∑–∞–ø—Ä–æ—Å—ã —Ñ–∏–ª—å–º–æ–≤ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞/–∞–∫—Ç–µ—Ä–∞! –ò—Å–ø–æ–ª—å–∑—É–π directors/cast –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ.",
            "parameters": {
                "type": "object",
                "properties": {
                    "query": {
                        "type": "string",
                        "description": "–¢–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ñ–∏–ª—å–º–æ–≤. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ñ–∏–ª—å–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: '–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É'), –≤–∫–ª—é—á–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –≤ query. –û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω movie_name –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–∏—Å–∫–∞."
                    },
                    "movie_name": {
                        "type": "string",
                        "description": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –¥–ª—è –ø—Ä—è–º–æ–≥–æ BM25 –ø–æ–∏—Å–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä—è–º–æ –Ω–∞–∑—ã–≤–∞–µ—Ç —Ñ–∏–ª—å–º –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–∏—Å–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: '–Ω–∞–π–¥–∏ –ú–∞—Ç—Ä–∏—Ü—É', '—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä'). –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ '–ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –ú–∞—Ç—Ä–∏—Ü—É' - –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π query. –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ '—Ñ–∏–ª—å–º—ã [—Ñ–∞–º–∏–ª–∏—è]' (–Ω–∞–ø—Ä–∏–º–µ—Ä: '—Ñ–∏–ª—å–º—ã –Ω–æ–ª–∞–Ω–∞', '—Ñ–∏–ª—å–º—ã —Ç–∞—Ä–∞–Ω—Ç–∏–Ω–æ') - —ç—Ç–æ –∑–∞–ø—Ä–æ—Å—ã —Ñ–∏–ª—å–º–æ–≤ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞/–∞–∫—Ç–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–π directors/cast –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ! –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω movie_name, query –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º."
                    },
                    "genres": {"type": "array", "items": {"type": "string"}, "default": []},
                    "atmospheres": {"type": "array", "items": {"type": "string"}, "default": []},
                    "start_year": {"type": "integer", "default": 1900},
                    "end_year": {"type": "integer", "default": 2025},
                    "cast": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–°–ø–∏—Å–æ–∫ –∏–º–µ–Ω –∞–∫—Ç–µ—Ä–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∏ –∏–º–µ–Ω–∞ –∞–∫—Ç–µ—Ä–æ–≤ –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (–≤–∫–ª—é—á–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –ø–µ—Ä–µ–≤–µ–¥–∏ —Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏ –¥–æ–±–∞–≤—å –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º—è–Ω—É–ª '–ë–µ–Ω–µ–¥–∏–∫—Ç –ö–∞–º–±–µ—Ä–±—ç—Ç—á' –∏–ª–∏ '–ö–∞–º–±–µ—Ä–±–µ—Ç—á' –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –¥–∏–∞–ª–æ–≥–∞, –¥–æ–±–∞–≤—å ['Benedict Cumberbatch']. –ò–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ, –∫–∞–∫ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –≤ –¥–∏–∞–ª–æ–≥–µ —É–ø–æ–º–∏–Ω–∞–ª–∏—Å—å –∞–∫—Ç–µ—Ä—ã!"
                    },
                    "directors": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "–°–ø–∏—Å–æ–∫ –∏–º–µ–Ω —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–≤–ª–µ–∫–∏ –∏–º–µ–Ω–∞ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –∏–∑ –í–°–ï–ì–û –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (–≤–∫–ª—é—á–∞—è –Ω–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –ø–µ—Ä–µ–≤–µ–¥–∏ —Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏ –¥–æ–±–∞–≤—å –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫. –†–∞—Å–ø–æ–∑–Ω–∞–π –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤ –ø–æ —Ñ–∞–º–∏–ª–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: '–ù–æ–ª–∞–Ω' = 'Christopher Nolan', '–¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ' = 'Quentin Tarantino', '–°–ø–∏–ª–±–µ—Ä–≥' = 'Steven Spielberg'). –ò–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ, –∫–∞–∫ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –≤ –¥–∏–∞–ª–æ–≥–µ —É–ø–æ–º–∏–Ω–∞–ª–∏—Å—å —Ä–µ–∂–∏—Å—Å–µ—Ä—ã!"
                    },
                    "rating_kp": {
                        "type": "number",
                        "description": "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞ –ö–∏–Ω–æ–ø–æ–∏—Å–∫–µ (–æ—Ç 0.0 –¥–æ 10.0). –ò–∑–≤–ª–µ–∫–∞–π –∏–∑ –¥–∏–∞–ª–æ–≥–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞, '–≤—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥', '–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫–∏–Ω–æ' –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: '—Ä–µ–π—Ç–∏–Ω–≥ –≤—ã—à–µ 7', '–Ω–µ –Ω–∏–∂–µ 8.5'). –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —è–≤–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π 0.0 (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)."
                    },
                    "rating_imdb": {
                        "type": "number",
                        "description": "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞ IMDb (–æ—Ç 0.0 –¥–æ 10.0). –ò–∑–≤–ª–µ–∫–∞–π –∏–∑ –¥–∏–∞–ª–æ–≥–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ IMDb, '–≤—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥', '–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫–∏–Ω–æ' –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 'IMDB –≤—ã—à–µ 7', '–Ω–µ –Ω–∏–∂–µ 8.5'). –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —è–≤–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π 0.0 (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)."
                    }
                },
                "required": []
            },
        },
    }
]

TOOLS_AGENT_EN = [
    {
        "type": "function",
        "function": {
            "name": "ask_user_question",
            "description": "Asks a clarifying question to the user if their request is incomplete or ambiguous. It is recommended to provide 3-5 suggested answer options (suggestions) for user convenience.",
            "parameters": {
                "type": "object",
                "properties": {
                    "question": {
                        "type": "string",
                        "description": "Question text for the user"
                    },
                    "suggestions": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "Optional: 3-5 suggested quick answer options for the user. Each option should be short (1-5 words), relevant to the question, and in the same language as the question. For example, for a genre question: ['Action', 'Comedy', 'Drama', 'Thriller']"
                    }
                },
                "required": ["question"]
            },
        },
    },
    {
        "type": "function",
        "function": {
            "name": "suggest_movie_titles",
            "description": "Suggests a set of movie titles (at least 10) that match the user's request. Use only well-known movies that definitely exist. Titles must be in ENGLISH (as they are stored in the database).",
            "parameters": {
                "type": "object",
                "properties": {
                    "titles": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "List of movie titles in ENGLISH (as they are stored in the database)"
                    },
                    "query": {
                        "type": "string",
                        "description": "Description of the user's request for finding similar movies"
                    },
                    "genres": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "List of genres (optional)"
                    },
                    "atmospheres": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "List of atmospheres (optional)"
                    },
                    "start_year": {
                        "type": "integer",
                        "description": "Start year (optional)"
                    },
                    "end_year": {
                        "type": "integer",
                        "description": "End year (optional)"
                    },
                    "cast": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "List of actor names in ENGLISH. ALWAYS extract actor names from the ENTIRE dialogue context (including the initial request and all user responses), translate non-English names to English, and add them to this list. For example: if the user mentioned 'Benedict Cumberbatch' or '–ö–∞–º–±–µ—Ä–±–µ—Ç—á' anywhere in the dialogue, add ['Benedict Cumberbatch']. Names must be in ENGLISH, as they are stored in the database. DO NOT leave empty if actors were mentioned in the dialogue!"
                    },
                    "directors": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "List of director names in ENGLISH. ALWAYS extract director names from the ENTIRE dialogue context (including the initial request and all user responses), translate non-English names to English, and add them to this list. Recognize famous directors by surnames (e.g., 'Nolan' = 'Christopher Nolan', 'Tarantino' = 'Quentin Tarantino', 'Spielberg' = 'Steven Spielberg'). Names must be in ENGLISH, as they are stored in the database. DO NOT leave empty if directors were mentioned in the dialogue!"
                    },
                    "rating_kp": {
                        "type": "number",
                        "description": "Minimum rating on Kinopoisk (from 0.0 to 10.0). Extract from dialogue if the user mentions Kinopoisk rating, 'high rating', 'quality movie' or specific numbers (e.g., 'rating above 7', 'not below 8.5'). If not explicitly specified, use 0.0 (no filtering)."
                    },
                    "rating_imdb": {
                        "type": "number",
                        "description": "Minimum rating on IMDb (from 0.0 to 10.0). Extract from dialogue if the user mentions IMDb rating, 'high rating', 'quality movie' or specific numbers (e.g., 'IMDB above 7', 'not below 8.5'). If not explicitly specified, use 0.0 (no filtering)."
                    }
                },
                "required": ["titles", "query"]
            },
        },
    },
    {
        "type": "function",
        "function": {
            "name": "search_movies_by_vector",
            "description": "Executes a final query to the vector database of movies. If the user explicitly names a movie title for direct search (e.g., 'movie Matrix', 'find Interstellar'), pass the title in the movie_name parameter and leave query empty. If the user asks for similar movies to a specific film (e.g., 'similar to Matrix', 'movies like Interstellar'), pass the movie title in the movie_name parameter and the request description in query (e.g., 'similar to Matrix'). The system will find the film by title and then find similar ones by vector. ‚ö†Ô∏è IMPORTANT: DO NOT use movie_name for requests like 'movies [surname]' (e.g., 'movies Nolan', 'movies Tarantino') - these are requests for director's/actor's films! Use directors/cast instead.",
            "parameters": {
                "type": "object",
                "properties": {
                    "query": {
                        "type": "string",
                        "description": "Text query for semantic search. Use for finding similar movies. If the user asks for similar movies to a film (e.g., 'similar to Matrix'), include the movie title in query. Leave empty if movie_name is specified for direct search."
                    },
                    "movie_name": {
                        "type": "string",
                        "description": "Movie title for direct BM25 search (use ONLY when the user explicitly names a movie for direct search, e.g., 'find Matrix', 'want to watch Interstellar'). DO NOT use for requests like 'similar to Matrix' - use query for that. DO NOT use for requests like 'movies [surname]' (e.g., 'movies Nolan', 'movies Tarantino') - these are requests for director's/actor's films, use directors/cast instead! If movie_name is specified, query should be empty."
                    },
                    "genres": {"type": "array", "items": {"type": "string"}, "default": []},
                    "atmospheres": {"type": "array", "items": {"type": "string"}, "default": []},
                    "start_year": {"type": "integer", "default": 1900},
                    "end_year": {"type": "integer", "default": 2025},
                    "cast": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "List of actor names in ENGLISH. ALWAYS extract actor names from the ENTIRE dialogue context (including the initial request and all user responses), translate non-English names to English, and add them to this list. For example: if the user mentioned 'Benedict Cumberbatch' or '–ö–∞–º–±–µ—Ä–±–µ—Ç—á' anywhere in the dialogue, add ['Benedict Cumberbatch']. Names must be in ENGLISH, as they are stored in the database. DO NOT leave empty if actors were mentioned in the dialogue!"
                    },
                    "directors": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "List of director names in ENGLISH. ALWAYS extract director names from the ENTIRE dialogue context (including the initial request and all user responses), translate non-English names to English, and add them to this list. Recognize famous directors by surnames (e.g., 'Nolan' = 'Christopher Nolan', 'Tarantino' = 'Quentin Tarantino', 'Spielberg' = 'Steven Spielberg'). Names must be in ENGLISH, as they are stored in the database. DO NOT leave empty if directors were mentioned in the dialogue!"
                    },
                    "rating_kp": {
                        "type": "number",
                        "description": "Minimum rating on Kinopoisk (from 0.0 to 10.0). Extract from dialogue if the user mentions Kinopoisk rating, 'high rating', 'quality movie' or specific numbers (e.g., 'rating above 7', 'not below 8.5'). If not explicitly specified, use 0.0 (no filtering)."
                    },
                    "rating_imdb": {
                        "type": "number",
                        "description": "Minimum rating on IMDb (from 0.0 to 10.0). Extract from dialogue if the user mentions IMDb rating, 'high rating', 'quality movie' or specific numbers (e.g., 'IMDB above 7', 'not below 8.5'). If not explicitly specified, use 0.0 (no filtering)."
                    }
                },
                "required": []
            },
        },
    }
]

# –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
TOOLS_AGENT = TOOLS_AGENT_RU

RERANK_PROMPT_TEMPLATE_RU = """
–¢—ã MovieAI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —Ñ–∏–ª—å–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ª–µ–¥—É—é—â–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é:

"{query}"

–í–æ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (id —Ñ–∏–ª—å–º–æ–≤ –∏ –∫—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è):
{movies_list}

–û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π 100 —Ñ–∏–ª—å–º–æ–≤ –ø–æ —Å–º—ã—Å–ª–æ–≤–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∫ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

‚ö†Ô∏è –í–∞–∂–Ω–æ:
- –í –æ—Ç–≤–µ—Ç–µ **—Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ —Ñ–∏–ª—å–º–æ–≤** –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1`, `2`, `3`).
- –ù–µ –¥–æ–±–∞–≤–ª—è–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –æ–ø–∏—Å–∞–Ω–∏–π –∏–ª–∏ —Ç–µ–∫—Å—Ç–∞.
- –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏:
1
4
3
...
"""

RERANK_PROMPT_TEMPLATE_EN = """
You are a MovieAI assistant. The user wants a movie matching the following description:

"{query}"

Here is a list of candidates (movie IDs and brief descriptions):
{movies_list}

Sort 100 movies by semantic relevance to the user's query.

‚ö†Ô∏è Important:
- In your response, **only a list of movie numbers**, one per line (e.g., `1`, `2`, `3`).
- Don't add comments, descriptions, or text.
- Just write:
1
4
3
...
"""

# –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
RERANK_PROMPT_TEMPLATE = RERANK_PROMPT_TEMPLATE_RU
